- name: Ejecutar Escaneo ZAP (SoluciÃ³n Definitiva)
        run: |
          echo "ðŸš€ Forzando Target URL y aumentando recursos..."
          TIMESTAMP=$(date +'%Y-%m-%d_%H-%M-%S')

          docker run --rm -u 0 \
            -v $(pwd)/zap/wrk:/zap/wrk:rw \
            -e JAVA_OPTS="-Xmx5g" \
            zaproxy/zap-stable zap-api-scan.py \
            -t /zap/wrk/schema.json \
            -f openapi \
            -O "https://demo.defectdojo.org" \
            -r /zap/wrk/reporte-defectdojo-${TIMESTAMP}.html \
            -z "-configfile /zap/wrk/zap_options.prop 
                -config openapi.importTimeoutInSecs=180 
                -config openapi.targetHostname=demo.defectdojo.org" \
            2>&1 | tee ./zap/wrk/zap_console.log
